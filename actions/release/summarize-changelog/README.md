# GitHub Action: Release - Summarize Changelog

## Overview

Compile a release changelog from all commits between two refs.

Features:

- Supports conventional commit grouping.
- Supports configurable Markdown templates.
- Can inject a summary generated by any LLM provider (`llm-summary` input).
- Can generate summary through LangChain using multiple providers (`openai`, `anthropic`, `google-genai`).
- Can generate the summary from the produced `llm-prompt` via a custom command (`llm-summary-command` input).
- Exposes a provider-agnostic `llm-prompt` output to integrate with any LLM action.

## Usage

```yaml
- id: changelog
  uses: hoverkraft-tech/ci-github-publish/actions/release/summarize-changelog@main
  with:
    base-ref: v1.2.0
    head-ref: HEAD
    conventional-commits: "true"
    llm-summary: ""
    llm-provider: "openai"
    llm-model: "gpt-4o-mini"
    llm-api-key: ${{ secrets.OPENAI_API_KEY }}
    llm-base-url: "https://api.openai.com/v1"
    llm-summary-command: ""
    markdown-template: |
      ## Release notes
      Range: `{{base_ref}}..{{head_ref}}`

      {{summary}}

      {{changes}}
```

## Inputs

| Input                  | Description                                                                        | Required | Default                     |
| ---------------------- | ---------------------------------------------------------------------------------- | -------- | --------------------------- |
| `base-ref`             | Base Git ref (excluded from the range).                                            | true     | -                           |
| `head-ref`             | Head Git ref (included in the range).                                              | true     | -                           |
| `conventional-commits` | Group commit messages by conventional commit type.                                 | false    | `true`                      |
| `llm-summary`          | Optional summary generated by any LLM provider.                                    | false    | `""`                        |
| `llm-provider`         | LLM provider used with LangChain (`openai`, `anthropic`, `google-genai`).          | false    | `openai`                    |
| `llm-model`            | Optional model used to generate summary from `llm-prompt`.                         | false    | `""`                        |
| `llm-api-key`          | Optional API key for the selected LLM provider.                                    | false    | `""`                        |
| `llm-base-url`         | Optional base URL (used for `openai` provider).                                    | false    | `https://api.openai.com/v1` |
| `llm-summary-command`  | Optional command that reads `llm-prompt` on stdin and returns a summary on stdout. | false    | `""`                        |
| `markdown-template`    | Markdown template with placeholders (`base_ref`, `changes`, â€¦)                     | false    | Built-in template           |

## Outputs

| Output         | Description                                         |
| -------------- | --------------------------------------------------- |
| `changelog`    | Rendered Markdown changelog.                        |
| `changes`      | Compiled Markdown list of changes.                  |
| `llm-prompt`   | Prompt text that can be sent to any LLM provider.   |
| `commit-count` | Number of commits included in the changelog output. |
